FROM rust:1.55

WORKDIR /mocword

COPY Cargo.* ./
RUN set -xe \
    && mkdir src \
    && touch src/lib.rs \
    && cargo check \
    && rm -rf src \
    && true

COPY . .
RUN cargo build --release --bin mocword_download

CMD ["cargo", "run", "--release", "--bin", "mocword_download"]
